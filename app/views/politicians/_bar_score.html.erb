<%-
  headshot_style ||= :medium
  headshot_size ||= nil
-%>

<div class="politician_score">
  <%- politician = score.politician -%>
  <% div_for politician do %>
    <%= render 'politicians/headshot', :politician => politician, :style => headshot_style, :size => headshot_size %>
    <%= render 'politicians/name', :politician => politician, :full => true %>
    <div id="<%= dom_id(score) %>"></div>
    <%= render 'reports/scores/evidence', :score => score %>
  <% end %>
</div>

<% javascript_tag do %>
  var chart = new Highcharts.Chart({
     chart: {
        renderTo: '<%= dom_id(score) %>',
        defaultSeriesType: 'bar',
        height: '100',
        width: '600',
        margin: [10, 10, 30, 10]
     },
     title: false,
     xAxis: {
        title: {
           text: null
        }
     },
     yAxis: {
        min: 0,
        max: 100,
        title: false
     },
     tooltip: {
        formatter: function() {
           return this.y + '%';
        }
     },
     plotOptions: {
        bar: {
          pointWidth: '100',
          dataLabels: {
            enabled: true,
            color: 'auto'
          }
        }
     },
     legend: false,
     credits: {
        enabled: false
     },
      series: [{
        data: [<%= score.score.round %>]
     }]
  });
<% end %>