<% title "Reports" %>

<div class="section">
  <h2>Find reports on the subjects you care about</h2>

  <p>Our politician report cards are created by people like you to condense all the complexity of politics to simple letter grades.</p>

  <p>Search for reports on the issues important to you.  If you find none, you can always <%= link_to 'create your own', new_report_path %>.</p>

  <%- replace ||= 'reports' -%>

  <% form_tag reports_path, :method => :get, :'data-replace' => replace do %>
    <p>
      <%= check_box_tag :include_interest_group_reports, '1', params[:include_interest_group_reports] %>
      <%= label_tag :include_interest_group_reports, 'Include Interest Group Reports' %>
    </p>
    <p>
      <%= label_tag :q, 'Search', :style => 'font-weight: bold;' %>
      <%= text_field_tag :q, @q %>
    </p>
    <p><%= submit_tag 'Search' %></p>

    <p>or browse by subject:</p>
    <div id="report_subjects_cloud">
      <%= render 'subjects/cloud', :subjects => @subjects, :target => lambda {|subjects|
        [reports_path(params.slice(:include_interest_group_reports).merge(:subjects => subjects)), {:'data-replace' => replace}]
      } %>
    </div>
  <% end %>
</div>

<div class="section">
  <h3><%= @title %></h3>
  <%= render 'reports/list', :reports => @reports %>
</div>