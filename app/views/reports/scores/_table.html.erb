<%- score_count = (scores.count + 1) -%>

<div id="report_scores">
<%- if score_count >= 50 -%>
<%-
  top_scores = scores.with_evidence.paginate(:page => params[:top_page],
    :total_entries => score_count / 2)
  bottom_scores = scores.with_evidence.paginate(:page => params[:bottom_page],
    :total_entries => score_count / 2,
    :order => :score)
-%>
  <table>
    <thead>
      <tr>
        <th>Votes With Report</th>
        <th>Votes Against Report</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><%= will_paginate top_scores,
                :param_name => :top_page,
                :params => {:bottom_page => bottom_scores.current_page},
                :'data-replace' => '#report_scores' %></td>
        <td><%= will_paginate bottom_scores,
                :param_name => :bottom_page,
                :params => {:top_page => top_scores.current_page},
                :'data-replace' => '#report_scores' %></td>
      </tr>
      <%- top_scores.zip(bottom_scores).each do |(top_score, bottom_score)| -%>
        <tr>
          <td><%= render 'reports/scores/score', :score => top_score %></td>
          <td><%= render 'reports/scores/score', :score => bottom_score %></td>
        </tr>
      <%- end -%>
      <tr>
        <td><%= will_paginate top_scores,
                :param_name => :top_page,
                :params => {:bottom_page => bottom_scores.current_page},
                :'data-replace' => '#report_scores' %></td>
        <td><%= will_paginate bottom_scores,
                :param_name => :bottom_page,
                :params => {:top_page => top_scores.current_page},
                :'data-replace' => '#report_scores' %></td>
      </tr>
    </tbody>
  </table>
<%- elsif score_count > 1 -%>
  <%- scores = scores.with_evidence.paginate(:page => params[:page], :total_entries => score_count) -%>
  <table>
    <thead>
      <tr>
        <th>All Scores<%= %Q{ for Representatives from "#{from_where}"} if from_where.present? %></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><%= will_paginate scores, :'data-replace' => '#report_scores' %></td>
      </tr>
      <%- scores.each do |score| -%>
        <tr>
          <td><%= render 'reports/scores/score', :score => score %></td>
        </tr>
      <%- end -%>
      <tr>
        <td><%= will_paginate scores, :'data-replace' => '#report_scores' %></td>
      </tr>
    </tbody>
  </table>
<%- elsif from_where.present? -%>
  <p>No scores found for: "<%= from_where %>"</p>
<%- elsif report.bill_criteria.blank? -%>
  <p>No scores yet, as this report has no criteria to judge representatives by.</p>
<%- else -%>
  <p>No scores yet, as the associated bills have not been voted on.</p>
<%- end -%>
</div>