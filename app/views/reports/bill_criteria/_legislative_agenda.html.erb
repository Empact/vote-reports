<h2 id="legislative_agenda">Legislative Agenda</h2>
<ul>
  <%- if report.bill_criteria.any? {|bc| bc.explanatory_url? }  -%>
  <li>Follow the Evidence links on the right to see the supporting evidence</li>
  <%- end -%>
  <li>Click on the bill to see its details</li>
</ul>

<%- active_bills = report.bill_criteria.by_introduced_on.active -%>
<%- active_amendments = report.amendment_criteria.by_offered_on.active -%>
<%- if active_bills.supported.present? || active_amendments.supported.present? -%>
  <h3>Supported Legislation</h3>
  <%- if active_bills.supported.present? -%>
  <ul>
    <%- active_bills.supported.each do |criterion| -%>
      <li class="bill_criterion"><%= render 'bill_criteria/bill_criterion', :bill_criterion => criterion %></li>
    <%- end -%>
  </ul>
  <%- end -%>
  <%- if active_amendments.supported.present? -%>
  <ul>
    <%- active_amendments.supported.each do |criterion| -%>
      <li class="amendment_criterion"><%= render 'amendment_criteria/amendment_criterion', :amendment_criterion => criterion, :show_year => true %></li>
    <%- end -%>
  </ul>
  <%- end -%>
<%- end -%>

<%- if active_bills.opposed.present? || active_amendments.opposed.present? -%>
  <h3>Opposed Legislation</h3>
  <%- if active_bills.opposed.present? -%>
  <ul>
    <%- active_bills.opposed.each do |criterion| -%>
      <li class="bill_criterion"><%= render 'bill_criteria/bill_criterion', :bill_criterion => criterion %></li>
    <%- end -%>
  </ul>
  <%- end -%>
  <%- if active_amendments.opposed.present? -%>
  <ul>
    <%- active_amendments.opposed.each do |criterion| -%>
      <li class="amendment_criterion"><%= render 'amendment_criteria/amendment_criterion', :amendment_criterion => criterion, :show_year => true %></li>
    <%- end -%>
  </ul>
  <%- end -%>
<%- end -%>

<%- unvoted_bills = report.bill_criteria.inactive -%>
<%- unvoted_amendments = report.amendment_criteria.inactive -%>
<%- if unvoted_bills.present? || unvoted_amendments.present? -%>
  <h3>Inactive Legislation</h3>
  <p>These bills are supported or opposed by this report, but have not come to a roll call vote.</p>
  <%- if unvoted_bills.present? -%>
  <ul>
    <%- unvoted_bills.each do |criterion| -%>
      <li class="bill_criterion"><%= render 'bill_criteria/bill_criterion', :bill_criterion => criterion, :with_support => true %></li>
    <%- end -%>
  </ul>
  <%- end -%>
  <%- if unvoted_amendments.present? -%>
  <ul>
    <%- unvoted_amendments.each do |criterion| -%>
      <li class="amendment_criterion"><%= render 'amendment_criteria/amendment_criterion', :amendment_criterion => criterion, :with_support => true, :show_year => true %></li>
    <%- end -%>
  </ul>
  <%- end -%>
<%- end -%>
