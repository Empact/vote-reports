<%- data = score_evidence_points(score) -%>
<% javascript_tag do %>
  new Highcharts.Chart({
    chart: {
      renderTo: '<%= dom_id(score, :evidence) %>',
      defaultSeriesType: 'line',
    },
    title: {
      text: '<%= escape_javascript(score_title(score)) %>',
    },
    subtitle: {
      text: 'based on <%= escape_javascript(score_evidence_components(score).join(', ')) %>',
    },
    xAxis: {
      categories: <%= raw data.map {|p| p[:x] }.to_json %>,
      title: {
         text: 'Month'
      }
    },
    yAxis: {
      min: 0,
      max: 100,
      title: {
         text: 'Rating'
      },
      plotLines: [{
         value: 0,
         width: 1,
         color: '#808080'
      }]
    },
    tooltip: {
      formatter: function() {
        return '<b>'+ this.series.name +'</b><br/>'+ this.x +': '+ this.y +'Â°C';
      }
    },
    legend: {
      enabled: false
    },
    series: [{
      type: 'line',
      data: <%= raw data.map {|p| p[:y] }.to_json %>
    }]
  });
<% end %>

<% div_for(score, :evidence, :style => "width: 100%; height: 400px") do %>
<% end %>
