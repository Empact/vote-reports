<%-
  selected ||= nil
  scores ||= []
-%>

<div class="span-5">
  <div class="stances round-4">
    <h2>Your Stance</h2>
    <dl>
      <dt class="<%= 'selected ' if !selected %>round-4">
        <%= link_to 'Overall Score', new_guide_path(:causes => guide.reports), :class => 'act-replace', :rel => 'instant_scores' %>
      </dt>
      <dt>Supported</dt>
      <% guide.reports_supported.each do |report| %>
        <dd class="round-4 act-hover<%= ' selected' if selected == report %>" rel="<%= dom_id(report, :remove) %>">
          <%= link_to report.name, new_guide_path(:selected => report), :class => 'act-replace', :rel => 'instant_scores' %>
          <%= link_to 'x', new_guide_path(:remove => report.to_param, :from => 'causes'), :class => 'act-replace remove_stance hide', :rel => 'instant_scores', :id => dom_id(report, :remove) %>
        </dd>
      <% end %>
      <dt>Opposed</dt>
      <% guide.reports_opposed.each do |report| %>
        <dd class="round-4 act-hover<%= ' selected' if selected == report %>" rel="<%= dom_id(report, :remove) %>">
          <%= link_to report.name, new_guide_path(:selected => report), :class => 'act-replace', :rel => 'instant_scores' %>
          <%= link_to 'x', new_guide_path(:remove => report.to_param, :from => 'causes'), :class => 'act-replace remove_stance hide', :rel => 'instant_scores', :id => dom_id(report, :remove) %>
        </dd>
      <% end %>
    </ul>
  </div>
</div>

<dl class="span-19 last guide_scores">
  <%- politicians = guide.politicians.for_display.group_by(&:current_office_type) -%>

  <dt>President of these United States of America</dt>
  <%= render 'politicians/scores', :scores => scores, :politicians => politicians['PresidentialTerm'] %>

  <%- if senators = politicians['SenateTerm'] -%>
    <dt>Senators for the <%= state_full_name(guide.congressional_district.state) %></dt>
    <%= render 'politicians/scores', :scores => scores, :politicians => senators %>
  <%- end -%>

  <%- if reps = politicians['RepresentativeTerm'] -%>
    <dt>Representative
      <%- if guide.congressional_district -%>
        for the <%= district_full_title_name(guide.congressional_district) %>
      <%- end -%>
    </dt>
    <%= render 'politicians/scores', :scores => scores, :politicians => reps %>
  <%- end -%>
</dl>
